<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Compare Kit</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            color: #fff;
        }

        /* â”€â”€ ìƒíƒœë³„ í™”ë©´ â”€â”€ */
        .screen {
            display: none;
            width: 100%;
            height: 100vh;
            height: 100dvh;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 24px;
            text-align: center;
            background: #000 url('assets/web_background.png') center/cover no-repeat;
        }
        .screen.active { display: flex; }

        /* â”€â”€ ë¡œë”© í™”ë©´ â”€â”€ */
        #screen-loading {
        }
        .spinner {
            width: 48px; height: 48px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loading-text { font-size: 1.1rem; opacity: 0.9; }

        /* â”€â”€ ì—ëŸ¬ í™”ë©´ (í† í° ë§Œë£Œ ë“±) â”€â”€ */
        #screen-error {
        }
        .error-icon { font-size: 64px; margin-bottom: 16px; }
        .error-title { font-size: 1.3rem; font-weight: 700; margin-bottom: 8px; }
        .error-msg { font-size: 0.95rem; opacity: 0.9; line-height: 1.5; }

        /* â”€â”€ ì—°ê²°ë¨ / ì•ˆë‚´ í™”ë©´ â”€â”€ */
        #screen-connected {
        }
        .connected-guide-img {
            width: 60%;
            max-width: 280px;
            border-radius: 16px;
            margin-bottom: 24px;
        }
        .connected-message {
            font-size: 1.3rem;
            line-height: 2;
            font-weight: 600;
            text-align: center;
            white-space: pre-line;
        }

        /* â”€â”€ ì„¸ì…˜ ì¢…ë£Œ í™”ë©´ â”€â”€ */
        #screen-revoked {
        }
        #screen-timeout {
        }

        /* â”€â”€ íƒ€ì„ì•„ì›ƒ ë°” â”€â”€ */
        .timeout-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: #667eea;
            transition: width 1s linear;
            z-index: 100;
        }

        /* â”€â”€ ë””ë²„ê·¸ íŒ¨ë„ (ê°œë°œìš©) â”€â”€ */
        .debug-panel {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.9);
            color: #0f0;
            font-family: monospace;
            font-size: 0.7rem;
            padding: 8px;
            max-height: 30vh;
            overflow-y: auto;
            z-index: 200;
        }
        .debug-panel.show { display: block; }
    </style>
</head>
<body>
    <!-- íƒ€ì„ì•„ì›ƒ ì§„í–‰ ë°” -->
    <div class="timeout-bar" id="timeout-bar" style="width: 100%;"></div>

    <!-- 1. ë¡œë”© í™”ë©´ -->
    <div class="screen active" id="screen-loading">
        <div class="spinner"></div>
        <div class="loading-text">ê¸°ê¸°ë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
    </div>

    <!-- 2. ì—ëŸ¬ í™”ë©´ -->
    <div class="screen" id="screen-error">
        <div class="error-icon">âš ï¸</div>
        <div class="error-title" id="error-title">ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</div>
        <div class="error-msg" id="error-msg">QR ì½”ë“œë¥¼ ë‹¤ì‹œ ìŠ¤ìº”í•´ì£¼ì„¸ìš”.</div>
    </div>

    <!-- 3. ì—°ê²°ë¨ / ì•ˆë‚´ í™”ë©´ -->
    <div class="screen" id="screen-connected">
        <img class="connected-guide-img" src="assets/web_guide.png" alt="ê°€ì´ë“œ" />
    </div>

    <!-- 4. ì„¸ì…˜ ë§Œë£Œ (ë‹¤ë¥¸ ì‚¬ìš©ì) -->
    <div class="screen" id="screen-revoked">
        <div class="error-icon">ğŸ‘‹</div>
        <div class="error-title">ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ì°¸ì—¬í–ˆìŠµë‹ˆë‹¤</div>
        <div class="error-msg">ì²´í—˜ì„ ì›í•˜ì‹œë©´ QR ì½”ë“œë¥¼ ë‹¤ì‹œ ìŠ¤ìº”í•´ì£¼ì„¸ìš”.</div>
    </div>

    <!-- 5. íƒ€ì„ì•„ì›ƒ -->
    <div class="screen" id="screen-timeout">
        <div class="error-icon">â°</div>
        <div class="error-title">ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤</div>
        <div class="error-msg">ì²´í—˜ì„ ì›í•˜ì‹œë©´ QR ì½”ë“œë¥¼ ë‹¤ì‹œ ìŠ¤ìº”í•´ì£¼ì„¸ìš”.</div>
    </div>

    <!-- ë””ë²„ê·¸ íŒ¨ë„ -->
    <div class="debug-panel" id="debug-panel"></div>

    <!-- MQTT.js CDN -->
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

    <!-- ê¸°ì¢… ê°ì§€ (ì›ë³¸ device.htmlì—ì„œ ì¶”ì¶œ) -->
    <script src="js/device-detector.js"></script>

    <!-- ì„¸ì…˜/MQTT/í™œë™ ê´€ë¦¬ -->
    <script src="js/app.js"></script>
</body>
</html>
